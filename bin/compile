#! /bin/sh
#
# compile
# Copyright (C) 2016 dhilipsiva <dhilipsiva@gmail.com>
#
# Distributed under terms of the MIT license.
#

set -eo pipefail

PY_VERSION='3.5.1'
PY_NAME="Python-"$PY_VERSION
PY_TGZ=$PY_NAME".tgz"
PY_ENV="/app/env"
BIN_DIR=$(cd $(dirname $0); pwd)
ROOT_DIR=$(dirname $BIN_DIR)
BUILD_DIR=$1
CACHE_DIR=$2
ENV_DIR=$3  # Deis doent send this
WORK_DIR=`pwd`

echo "Dependencies and compiler"

echo "==========================================================================="
echo "which python"
cd $CACHE_DIR
# if [[ ! -f $PY_TGZ ]]; then
	curl -O https://www.python.org/ftp/python/$PY_VERSION/$PY_TGZ
	tar -xzvf $PY_TGZ
	cd $PY_NAME
	./configure --prefix=/usr/local
	sudo make
	sudo make install
	pyvenv /app/env
	source /app/env/bin/activate
# fi
which python
which pip
python --version
python3 --version
echo "==========================================================================="
